function reportActionHandler(){document.location.href.indexOf("report")<0||reportChartMain()}function reportStorageMain(){$.post("/admin/report/ajax",{action:"get-main-storage-data-json"},function(t){$(".report-storage-info").removeClass("hidden"),$(".report-storage-load").addClass("hidden"),$(".report-mysql-size").text(t.size.mysql),$(".report-cache-size").text(t.size.cache),$(".report-images-size").text(t.size.images),$(".report-uploads-size").text(t.size.uploads),$(".report-thumbnails-size").text(t.size.thumbnails)})}function reportChartMain(){$.post("/admin/report/ajax",{action:"get-main-chart-data-json"},function(t){$(".report-chart-load").addClass("hidden");var a=[],e=[],o=[],r=[],i=[],n=[],s=[];$.each(t.visits,function(t,a){r.push(a.period),i.push(a.uniques),o.push(a.total)}),$.each(t.actions.all,function(t,e){n.push(e.day),a.push(e.count)}),$.each(t.actions.user,function(t,a){s.push(a.day),e.push(a.count)});var d={labels:r,datasets:[{label:"Views",backgroundColor:"rgba(220,220,220,0.2)",borderColor:"rgba(220,220,220,1)",borderWidth:1,fill:!1,data:o},{label:"Unique visitors",backgroundColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",borderWidth:1,fill:!1,data:i}]},l={labels:n,datasets:[{label:"Action",backgroundColor:"rgba(221,75,57)",borderColor:"rgba(221,75,57)",borderWidth:1,fill:!1,data:a}]},c={labels:s,datasets:[{label:"Action",backgroundColor:"rgba(0,192,239)",borderColor:"rgba(0,192,239)",borderWidth:1,fill:!1,data:e}]},p=document.getElementById("chart-visits").getContext("2d");window.myBar=new Chart(p,{type:"line",data:d,options:{responsive:!0,title:{display:!0,text:"Attendance for 31 days"}},scaleStartValue:0});var u=document.getElementById("chart-actions-all").getContext("2d");window.myBar=new Chart(u,{type:"line",data:l,options:{responsive:!0,title:{display:!0,text:"Action in admin panel for 31 days"}},scaleStartValue:0});var h=document.getElementById("chart-actions-user").getContext("2d");window.myBar=new Chart(h,{type:"line",data:c,options:{responsive:!0,title:{display:!0,text:"My actions in the admin panel in 31 days"}},scaleStartValue:0}),reportStorageMain()})}