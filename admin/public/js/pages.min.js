function pagesActionHandler(){document.location.href.indexOf("pages")<0||(pagesListInit(),pagesSearchInit(),$(".page-add").on("click",function(){pageAdd()}),$(".gallery-add").on("click",function(){galleryAdd()}),$(".pages-action button").on("click",function(){switch($(this).attr("class")){case"btn btn-sm pages-edit":var e=$(".pages-tree-list").jstree(!0),a=e.get_selected()[0];switch(e.get_selected(!0)[0].type){case"tag":pageTagEdit(a);break;case"add":pageAddEdit(a);break;case"home":pageHomeEdit(a);break;case"page":pageEdit(a);break;case"gallery":galleryEdit(a);break;case"category":pageCategoryEdit(a);break;case"bookmark":pageBookmarkEdit(a);break;case"not-found":pageNotFoundEdit(a)}break;case"btn btn-sm pages-enable":pagesUpdateStatus(1);break;case"btn btn-sm pages-disable":pagesUpdateStatus(0);break;case"btn btn-sm pages-delete":pagesDelete()}}),$(".pages-descendant-action a").on("click",function(){switch($(this).attr("class")){case"pages-descendant-page":pageAdd(pagesGetSelected()[0]);break;case"pages-descendant-gallery":galleryAdd(pagesGetSelected()[0])}}))}function pagesSearchInit(){$(".pages-search").keyup(function(){$(".pages-tree-list").jstree(!0).search($(this).val())})}function pagesActionBtnHelper(e){function a(a){if("deselect_all"==e.action)return!0;var t=!0,s=e.selected.length,i=e.node.original.type;switch(a){case"pages-descendant":$.inArray(i,["page","gallery"])>-1&&1==s&&(t=!1);break;case"pages-edit":1==s&&(t=!1);break;case"pages-enable":$.inArray(i,["page","gallery","category","add"])>-1&&1==s&&(t=!1);break;case"pages-disable":$.inArray(i,["page","gallery","category","add"])>-1&&s>0&&(t=!1);break;case"pages-delete":$.inArray(i,["page","gallery"])>-1&&s>0&&(t=!1)}return t}$(".pages-descendant").prop("disabled",a("pages-descendant")),$(".pages-edit").prop("disabled",a("pages-edit")),$(".pages-enable").prop("disabled",a("pages-enable")),$(".pages-disable").prop("disabled",a("pages-disable")),$(".pages-delete").prop("disabled",a("pages-delete"))}function pagesListViewHelper(e){$.each(e.instance._model.data,function(e,a){if("#"!=a.id){var t=$("#"+a.id+"_anchor");0==a.original.status&&t.addClass("js-tree-disabled-node"),t.find("sup").remove(),t.append($("<sup></sup>").text(a.original.label).css({color:"#999",left:"5px"}))}})}function pagesViews(){$(".pages-tree-list .jstree-node").length?($(".pages-search").closest(".well").removeClass("hidden"),$(".pages-not-found").addClass("hidden"),$(".pages-action").removeClass("hidden")):($(".pages-search").closest(".well").addClass("hidden"),$(".pages-not-found").removeClass("hidden"),$(".pages-action").addClass("hidden"))}function pagesListInit(){$(".pages-tree-list").jstree({core:{strings:{tag:"Your Text"},animation:1,force_text:!0,themes:{name:"default",responsive:!0,stripes:!0},data:{url:"/admin/pages/get-json",dataType:"json"},check_callback:function(e,a,t,s,i){if("move_node"==e){if($.inArray(s,[0,1,2])>-1&&"#"==t.id)return!1;if($.inArray(t.type,["not-found","tag","home","category","add","bookmark"])>-1)return!1;if($.inArray(a.type,["not-found","tag","home","category","add","bookmark"])>-1&&"#"!=t.type)return!1}return!0}},dnd:{is_draggable:function(e){return!($.inArray(e[0].type,["not-found","tag","home"])>-1)}},types:{"not-found":{},category:{},bookmark:{},gallery:{},system:{},page:{},home:{},blog:{},tag:{},add:{}},checkbox:{three_state:!1},plugins:["dnd","search","wholerow","checkbox","types"]}).on("changed.jstree",function(e,a){pagesActionBtnHelper(a)}).on("move_node.jstree",function(e,a){var t=0,s=[];!function e(a){$.each(a,function(a,i){s.push({id:[i.id],position:t}),t++,i.children.length>0&&e(i.children)})}(a.new_instance.get_json()),$.post("/admin/pages/ajax",{action:"update-position","new-position":JSON.stringify(s),parent:"#"==a.parent?0:a.parent,"id[]":a.node.id},function(e){"ok"==e&&($.toast({text:"Changes saved!",icon:"success"}),$(".pages-tree-list").jstree("refresh"))})}).on("ready.jstree",function(e,a){pagesViews(),pagesListViewHelper(a)}).on("open_node.jstree",function(e,a){pagesListViewHelper(a)}).on("refresh.jstree",function(e,a){pagesViews(),pagesListViewHelper(a)})}function pagesGetSelected(e){var a=$(".pages-tree-list").jstree(!0),t=a.get_selected(),s=a.get_selected(!0);return!0===e&&$.each(s,function(e,a){$.each(a.children_d,function(e,a){t.push(a)})}),t.length?t:0}function pageElementsSerialize(){var e={elements:[],property:{}};return $(".element-item").each(function(){e.elements.push($(this).data("element"))}),$(".element-property-item").each(function(){e.property[$(this).attr("id")]=$(this).is(":checked")?1:0}),JSON.stringify(e)}function pageAdd(e){$.post("/admin/pages/ajax",{action:"get-form-page-add",parent:void 0===e?"0":e},function(e){bootbox.dialog({title:"Adding a new page",message:e,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-form-add").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete"),$(document).off("click",".image-delete")}),editorInit(),formBuilder(),videoHandler(),imagesHandler(),imagesSliderHandler(),$(".selectpicker").selectpicker({container:".big-modal",iconBase:"fa",tickIcon:"fa-check-square-o"}),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".token-field").tokenfield(),$(".icp-auto").iconpicker(),$("#page-form-add").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url"},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesSerialize(),video:videoSerialize(),form:formBuilderSerialize(),action:"add",type:6});$.post("/admin/pages/ajax",$(e.target).serialize()+"&"+a,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Page added!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageEdit(e){$.post("/admin/pages/ajax",{action:"get-form-page-edit",id:e},function(a){bootbox.dialog({title:"Page editing",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete"),$(document).off("click",".image-delete")}),editorInit(),formBuilder(),videoHandler(),imagesHandler(),imagesSliderHandler(),$(".selectpicker").selectpicker({container:".big-modal",iconBase:"fa",tickIcon:"fa-check-square-o"}),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".token-field").tokenfield(),$(".icp-auto").iconpicker(),$("#page-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url",id:e},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesSerialize(),video:videoSerialize(),form:formBuilderSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageHomeEdit(e){$.post("/admin/pages/ajax",{action:"get-form-home-edit",id:e},function(a){bootbox.dialog({title:"Homepage editing",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-home-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete"),$(document).off("click",".image-delete")}),editorInit(),videoHandler(),imagesHandler(),imagesSliderHandler(),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".icp-auto").iconpicker(),$("#page-home-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesSerialize(),video:videoSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageTagEdit(e){$.post("/admin/pages/ajax",{action:"get-form-tag-edit",id:e},function(a){bootbox.dialog({title:"Editing an output page for tags",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-tag-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".icp-auto").iconpicker(),$("#page-tag-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageAddEdit(e){$.post("/admin/pages/ajax",{action:"get-form-add-edit",id:e},function(a){bootbox.dialog({title:"Edit page add",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-add-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}),editorInit(),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".icp-auto").iconpicker(),$("#page-add-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url",id:e},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageCategoryEdit(e){$.post("/admin/pages/ajax",{action:"get-form-category-edit",id:e},function(a){bootbox.dialog({title:"Editing a category page",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-category-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".icp-auto").iconpicker(),$("#page-category-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url",id:e},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageBookmarkEdit(e){$.post("/admin/pages/ajax",{action:"get-form-bookmark-edit",id:e},function(a){bootbox.dialog({title:"Edit bookmark page",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-bookmark-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}),editorInit(),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".icp-auto").iconpicker(),$("#page-bookmark-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url",id:e},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pageNotFoundEdit(e){$.post("/admin/pages/ajax",{action:"get-form-not-found-edit",id:e},function(a){bootbox.dialog({title:"Page editing 404",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#page-not-found-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete"),$(document).off("click",".image-delete")}),editorInit(),formBuilder(),videoHandler(),imagesHandler(),imagesSliderHandler(),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".token-field").tokenfield(),$(".icp-auto").iconpicker(),$("#page-not-found-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesSerialize(),video:videoSerialize(),form:formBuilderSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function galleryAdd(e){$.post("/admin/pages/ajax",{action:"get-form-gallery-add",parent:void 0===e?"0":e},function(e){bootbox.dialog({title:"Adding a new gallery",message:e,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#gallery-form-add").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".gallery-image-replace"),$(document).off("click",".gallery-image-delete"),$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete")}),editorInit(),formBuilder(),videoHandler(),imagesSliderHandler(),imagesGalleryHandler(),$(".selectpicker").selectpicker({container:".big-modal",iconBase:"fa",tickIcon:"fa-check-square-o"}),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".token-field").tokenfield(),$(".icp-auto").iconpicker(),$("#gallery-form-add").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url"},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesGallerySerialize(),video:videoSerialize(),form:formBuilderSerialize(),action:"add",type:7});$.post("/admin/pages/ajax",$(e.target).serialize()+"&"+a,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Gallery added!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function galleryEdit(e){$.post("/admin/pages/ajax",{action:"get-form-gallery-edit",id:e},function(a){bootbox.dialog({title:"Gallery Editing",message:a,className:"big-modal",buttons:{success:{label:"Save",className:"btn-success",callback:function(){return $("#gallery-form-edit").submit(),!1}},danger:{label:"Cancel",className:"btn-danger",callback:function(){}}}}).on("hidden.bs.modal",function(){$(document).off("click",".gallery-image-replace"),$(document).off("click",".gallery-image-delete"),$(document).off("click",".slider-image-replace"),$(document).off("click",".slider-image-delete"),$(document).off("click",".video-delete")}),editorInit(),formBuilder(),videoHandler(),imagesSliderHandler(),imagesGalleryHandler(),$(".selectpicker").selectpicker({container:".big-modal",iconBase:"fa",tickIcon:"fa-check-square-o"}),$(".translit-in").on("input",function(){$(this).liTranslit({elAlias:$(".translit-out")})}),$(".check-box-picker").checkboxpicker(),$(".elements-list").sortable(),$(".token-field").tokenfield(),$(".icp-auto").iconpicker(),$("#gallery-form-edit").bootstrapValidator({excluded:[":disabled"],fields:{url:{validators:{notEmpty:{message:"Cannot be empty."},remote:{message:"This URL is already in use.",data:{action:"check-free-url",id:e},url:"/admin/pages/ajax",type:"POST",delay:0}}},name:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},title:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},header:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},content:{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},description:{validators:{stringLength:{max:160,message:"160 characters maximum"}}}}}).on("success.form.bv",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=$.param({elements:pageElementsSerialize(),slider:imagesSliderSerialize(),images:imagesGallerySerialize(),video:videoSerialize(),form:formBuilderSerialize(),action:"update",id:[e]});$.post("/admin/pages/ajax",$(a.target).serialize()+"&"+t,function(e){"ok"==e?(bootbox.hideAll(),$.toast({text:"Changes saved!",icon:"success"})):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})})})}function pagesUpdateStatus(e){var a="";a=1==e?"Activate selected pages?":"Deactivate selected pages?",bootbox.dialog({message:a,buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/pages/ajax",{action:"update",status:e,id:pagesGetSelected(!0)},function(e){"ok"==e?$.toast({text:"Changes saved!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}function pagesDelete(){bootbox.dialog({message:"Delete selected pages?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/pages/ajax",{action:"delete",id:pagesGetSelected()},function(e){"ok"==e?$.toast({text:"Pages deleted!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),$(".pages-tree-list").jstree("refresh")})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}