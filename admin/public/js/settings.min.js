function settingsActionHandler(){document.location.href.indexOf("settings")<0||($(".cache-clear").on("click",function(){bootbox.dialog({message:"Clear cache?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/settings/ajax",{action:"clear-cache"},function(e){"ok"==e?$.toast({text:"The cache is cleared!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),updateOuter()})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}),$(".images-clear").on("click",function(){bootbox.dialog({message:"Delete unused images?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/settings/ajax",{action:"clear-images"},function(e){"ok"==e?$.toast({text:"Images deleted!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),updateOuter()})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}),$(".color-picker").colorpicker(),$("#settings-form").bootstrapValidator({fields:{"site-title":{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:255,message:"255 characters maximum"}}},"site-description":{validators:{notEmpty:{message:"Cannot be empty."},stringLength:{max:160,message:"160 characters maximum"}}},"notification-email":{validators:{notEmpty:{message:"Cannot be empty."},emailAddress:{message:"Please enter a valid email address."}}},"page-rows":{validators:{notEmpty:{message:"Cannot be empty."},regexp:{regexp:/^\d+$/,message:"Integer only"}}},"page-rows-admin":{validators:{notEmpty:{message:"Cannot be empty."},regexp:{regexp:/^\d+$/,message:"Integer only"}}},"entry-url":{validators:{notEmpty:{message:"Cannot be empty."},regexp:{regexp:/^[a-z]+$/i,message:"Latin characters only"}}}}}).on("success.form.bv",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,bootbox.dialog({message:"Save changes?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){var a=$.param({action:"update"});$.post("/admin/settings/ajax",$(e.target).serialize()+"&"+a,function(e){"ok"==e?$.toast({text:"Changes saved!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),updateOuter()})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}))}