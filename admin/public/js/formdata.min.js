function formDataActionHandler(){document.location.href.indexOf("formdata")<0||($(".btn-formdata-checkbox").on("click",function(){formDataCheckboxHandler()}),$(".formdata-action div").on("click",function(){var a=$(this).closest("tr.formdata-list").attr("id").split("-")[1];switch($(this).attr("class")){case"formdata-view":formDataView(a);break;case"formdata-delete":formDataDelete(a)}}),formdataTableSortable())}function formdataTableSortable(){var a=[];$(".table-formdata-body").sortable({appendTo:"parent",handle:".fa-bars",start:function(t,e){$(this).children().each(function(){$(this).hasClass("ui-sortable-placeholder")||a.push($(this).attr("id").split("-")[2])})},update:function(t,e){var o=[],s=[];$(this).children().each(function(){$(this).hasClass("ui-sortable-placeholder")||o.push($(this).attr("id").split("-")[1])}),$.each(o,function(t,e){s.push({id:[e],position:a[t]})}),s=JSON.stringify(s),$.post("/admin/formdata/ajax",{action:"update-position",json:s},function(a){"ok"==a?$.toast({text:"Change saved!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"})})}}).disableSelection()}function formDataCheckboxHandler(){var a=$("#list-formdata-form").serialize();a.indexOf("select-action=delete")+1&&(a+="&action=delete"),a.indexOf("id")+1?bootbox.dialog({message:"Perform selected action?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/formdata/ajax",a,function(a){"ok"==a?$.toast({text:"Changes saved!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),updateOuter()})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}}):bootbox.alert("You have not chosen anything!")}function formDataView(a){$.post("/admin/formdata/ajax",{action:"get-view-data",id:a},function(t){bootbox.dialog({title:"Request number "+a,message:t,className:"big-modal",buttons:{success:{label:"ОК",className:"btn-success"}}})})}function formDataDelete(a){bootbox.dialog({message:"Delete this request?",buttons:{success:{label:"Yes",className:"btn-success",callback:function(){$.post("/admin/formdata/ajax",{action:"delete","id[]":a},function(a){"ok"==a?$.toast({text:"Removed!",icon:"success"}):$.toast({text:"An error has occurred!",icon:"error"}),updateOuter()})}},danger:{label:"No",className:"btn-danger",callback:function(){}}}})}